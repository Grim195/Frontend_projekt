import{_ as v,E as P,H as h,c as i,a as _,b as n,r as l,d as m,h as p,i as k,F as c,j as d,u as C,k as E,l as b,o,m as S,n as f,t as w}from"./index-P2zWE7AS.js";const y={name:"ListingView",components:{HeroSection:h,EventCard:P},data(){return{sortBy:"date",currentPage:1,eventsPerPage:6,eventStore:b(),cart:E(),router:C()}},computed:{sortedEvents(){return[...this.eventStore.events].sort((e,t)=>this.sortBy==="price"?e.price-t.price:new Date(e.date)-new Date(t.date))},totalPages(){return Math.ceil(this.sortedEvents.length/this.eventsPerPage)},pagedEvents(){const e=(this.currentPage-1)*this.eventsPerPage;return this.sortedEvents.slice(e,e+this.eventsPerPage)}},methods:{addToCart(e){e.availableTickets>0&&(this.cart.addToCart(e),this.eventStore.buyTicket(e.id),alert(`Added "${e.title}" to cart!`))},viewEvent(e){this.router.push(`/events/${e}`)},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},goToPage(e){this.currentPage=e}}},T={class:"controls"},B={class:"event-listing"},x={class:"event-grid"},V={class:"pagination"},D=["disabled"],H=["onClick"],N=["disabled"];function A(e,t,L,j,a,r){const u=l("HeroSection"),g=l("EventCard");return o(),i("main",null,[_(u,{title:"Events",subtitle:"Browse and book your tickets",image:"src/assets/images/ticket.jpg"}),n("section",T,[n("label",null,[t[4]||(t[4]=m(" Sort by: ",-1)),p(n("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.sortBy=s)},[...t[3]||(t[3]=[n("option",{value:"date"},"Date",-1),n("option",{value:"price"},"Price",-1)])],512),[[k,a.sortBy]])])]),n("section",B,[n("div",x,[(o(!0),i(c,null,d(r.pagedEvents,s=>(o(),S(g,{key:s.id,event:s,onAddToCart:r.addToCart,onViewDetails:r.viewEvent},null,8,["event","onAddToCart","onViewDetails"]))),128))])]),n("section",V,[n("button",{disabled:a.currentPage===1,onClick:t[1]||(t[1]=(...s)=>r.prevPage&&r.prevPage(...s))},"Previous",8,D),(o(!0),i(c,null,d(r.totalPages,s=>(o(),i("button",{key:s,class:f({active:a.currentPage===s}),onClick:F=>r.goToPage(s)},w(s),11,H))),128)),n("button",{disabled:a.currentPage===r.totalPages,onClick:t[2]||(t[2]=(...s)=>r.nextPage&&r.nextPage(...s))},"Next",8,N)])])}const z=v(y,[["render",A],["__scopeId","data-v-d9298344"]]);export{z as default};
